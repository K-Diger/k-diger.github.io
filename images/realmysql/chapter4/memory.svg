<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 800">
    <!-- 배경 -->
    <rect width="1000" height="800" fill="#f8f9fa"/>

    <!-- 메인 타이틀 -->
    <text x="500" y="40" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold" fill="#333">MySQL 메모리 사용 구조</text>

    <!-- MySQL 서버 경계 -->
    <rect x="50" y="60" width="900" height="720" rx="10" ry="10" fill="#e7f2fa" stroke="#2c80b9" stroke-width="2"/>

    <!-- 두 가지 메모리 영역 분리선 -->
    <line x1="50" y1="400" x2="950" y2="400" stroke="#2c80b9" stroke-width="2" stroke-dasharray="5,5"/>

    <!-- 전역 메모리 영역 (위쪽) -->
    <text x="500" y="85" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold" fill="#2c80b9">전역 메모리 영역 (Global Memory)</text>
    <text x="500" y="110" font-family="Arial" font-size="16" text-anchor="middle" fill="#555">모든 클라이언트 스레드가 공유하는 메모리 영역</text>

    <!-- InnoDB 버퍼 풀 -->
    <rect x="80" y="130" width="400" height="240" rx="8" ry="8" fill="#d1e7f5" stroke="#4a96d3" stroke-width="2"/>
    <text x="280" y="155" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold" fill="#2c80b9">InnoDB 버퍼 풀</text>
    <text x="280" y="180" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">innodb_buffer_pool_size (시스템 메모리의 50-75%)</text>

    <!-- InnoDB 버퍼 풀 내부 구성 -->
    <rect x="100" y="195" width="360" height="65" rx="5" ry="5" fill="#ffffff" stroke="#4a96d3" stroke-width="1"/>
    <text x="280" y="225" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">테이블 데이터 페이지</text>

    <rect x="100" y="270" width="175" height="65" rx="5" ry="5" fill="#ffffff" stroke="#4a96d3" stroke-width="1"/>
    <text x="187" y="305" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">인덱스 페이지</text>

    <rect x="285" y="270" width="175" height="65" rx="5" ry="5" fill="#ffffff" stroke="#4a96d3" stroke-width="1"/>
    <text x="372" y="305" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">시스템 페이지</text>

    <!-- 기타 전역 메모리 영역 -->
    <rect x="520" y="130" width="400" height="240" rx="8" ry="8" fill="#d1e7f5" stroke="#4a96d3" stroke-width="2"/>
    <text x="720" y="155" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold" fill="#2c80b9">기타 전역 메모리 영역</text>

    <!-- 기타 전역 메모리 내부 구성 -->
    <rect x="540" y="170" width="360" height="40" rx="5" ry="5" fill="#ffffff" stroke="#4a96d3" stroke-width="1"/>
    <text x="720" y="195" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">MyISAM 키 버퍼 (key_buffer_size)</text>

    <rect x="540" y="215" width="360" height="40" rx="5" ry="5" fill="#ffffff" stroke="#4a96d3" stroke-width="1"/>
    <text x="720" y="240" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">테이블 캐시 (table_open_cache)</text>

    <rect x="540" y="260" width="360" height="40" rx="5" ry="5" fill="#ffffff" stroke="#4a96d3" stroke-width="1"/>
    <text x="720" y="285" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">테이블 정의 캐시 (table_definition_cache)</text>

    <rect x="540" y="305" width="175" height="40" rx="5" ry="5" fill="#ffffff" stroke="#4a96d3" stroke-width="1"/>
    <text x="628" y="330" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">퍼포먼스 스키마</text>

    <rect x="725" y="305" width="175" height="40" rx="5" ry="5" fill="#ffffff" stroke="#4a96d3" stroke-width="1"/>
    <text x="812" y="330" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">임시 테이블</text>

    <!-- 스레드별 메모리 영역 (아래쪽) -->
    <text x="500" y="430" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold" fill="#2c80b9">스레드별 메모리 영역 (Per-Thread Memory)</text>
    <text x="500" y="455" font-family="Arial" font-size="16" text-anchor="middle" fill="#555">각 클라이언트 연결마다 할당되는 독립적인 메모리 영역</text>

    <!-- 스레드 1 -->
    <rect x="80" y="480" width="275" height="280" rx="8" ry="8" fill="#e1efda" stroke="#70ad47" stroke-width="2"/>
    <text x="217" y="505" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold" fill="#507e32">연결 스레드 #1</text>

    <!-- 스레드 1 내부 구성 -->
    <rect x="95" y="520" width="245" height="35" rx="5" ry="5" fill="#ffffff" stroke="#70ad47" stroke-width="1"/>
    <text x="217" y="542" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">스레드 스택 (thread_stack)</text>

    <rect x="95" y="560" width="245" height="35" rx="5" ry="5" fill="#ffffff" stroke="#70ad47" stroke-width="1"/>
    <text x="217" y="582" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">연결 버퍼 (net_buffer_length)</text>

    <rect x="95" y="600" width="245" height="35" rx="5" ry="5" fill="#ffffff" stroke="#70ad47" stroke-width="1"/>
    <text x="217" y="622" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">결과 버퍼</text>

    <rect x="95" y="640" width="115" height="35" rx="5" ry="5" fill="#ffffff" stroke="#70ad47" stroke-width="1"/>
    <text x="152" y="662" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">정렬 버퍼</text>

    <rect x="225" y="640" width="115" height="35" rx="5" ry="5" fill="#ffffff" stroke="#70ad47" stroke-width="1"/>
    <text x="282" y="662" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">읽기 버퍼</text>

    <rect x="95" y="680" width="115" height="35" rx="5" ry="5" fill="#ffffff" stroke="#70ad47" stroke-width="1"/>
    <text x="152" y="702" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">조인 버퍼</text>

    <rect x="225" y="680" width="115" height="35" rx="5" ry="5" fill="#ffffff" stroke="#70ad47" stroke-width="1"/>
    <text x="282" y="702" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">BLOB 버퍼</text>

    <!-- 스레드 2 -->
    <rect x="365" y="480" width="275" height="280" rx="8" ry="8" fill="#e1efda" stroke="#70ad47" stroke-width="2"/>
    <text x="502" y="505" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold" fill="#507e32">연결 스레드 #2</text>

    <!-- 스레드 2 내부 구성 (스레드 1과 동일한 구조) -->
    <rect x="380" y="520" width="245" height="35" rx="5" ry="5" fill="#ffffff" stroke="#70ad47" stroke-width="1"/>
    <text x="502" y="542" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">스레드 스택 (thread_stack)</text>

    <rect x="380" y="560" width="245" height="35" rx="5" ry="5" fill="#ffffff" stroke="#70ad47" stroke-width="1"/>
    <text x="502" y="582" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">연결 버퍼 (net_buffer_length)</text>

    <rect x="380" y="600" width="245" height="35" rx="5" ry="5" fill="#ffffff" stroke="#70ad47" stroke-width="1"/>
    <text x="502" y="622" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">결과 버퍼</text>

    <rect x="380" y="640" width="115" height="35" rx="5" ry="5" fill="#ffffff" stroke="#70ad47" stroke-width="1"/>
    <text x="437" y="662" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">정렬 버퍼</text>

    <rect x="510" y="640" width="115" height="35" rx="5" ry="5" fill="#ffffff" stroke="#70ad47" stroke-width="1"/>
    <text x="567" y="662" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">읽기 버퍼</text>

    <rect x="380" y="680" width="115" height="35" rx="5" ry="5" fill="#ffffff" stroke="#70ad47" stroke-width="1"/>
    <text x="437" y="702" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">조인 버퍼</text>

    <rect x="510" y="680" width="115" height="35" rx="5" ry="5" fill="#ffffff" stroke="#70ad47" stroke-width="1"/>
    <text x="567" y="702" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">BLOB 버퍼</text>

    <!-- 스레드 N -->
    <rect x="650" y="480" width="275" height="280" rx="8" ry="8" fill="#e1efda" stroke="#70ad47" stroke-width="2"/>
    <text x="787" y="505" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold" fill="#507e32">연결 스레드 #N</text>

    <!-- 스레드 N은 축약 표시 -->
    <text x="787" y="620" font-family="Arial" font-size="36" text-anchor="middle" fill="#70ad47">...</text>
    <text x="787" y="660" font-family="Arial" font-size="14" text-anchor="middle" fill="#555">(다른 스레드와 동일한 구조)</text>

    <!-- 메모리 관리 특성 섹션 -->
    <rect x="80" y="770" width="840" height="1" stroke="#888" stroke-width="1"/>
    <text x="500" y="790" font-family="Arial" font-size="12" text-anchor="middle" fill="#555">메모리 할당: 전역(서버 시작 시), 스레드별(연결 시) / 해제: 스레드 종료 시 또는 FLUSH 명령 사용</text>
</svg>